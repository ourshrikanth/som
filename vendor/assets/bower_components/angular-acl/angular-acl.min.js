"use strict";angular.module("mm.acl",[]),angular.module("mm.acl").factory("AclService",[function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1});var a={roles:[],abilities:{}},b=function(b){return"object"==typeof a.abilities[b]},c=function(c){return b(c)?a.abilities[c]:[]},d={};return d.attachRole=function(b){-1===a.roles.indexOf(b)&&a.roles.push(b)},d.detachRole=function(b){var c=a.roles.indexOf(b);c>-1&&a.roles.splice(c,1)},d.flushRoles=function(){a.roles=[]},d.hasRole=function(b){return a.roles.indexOf(b)>-1},d.setAbilities=function(b){a.abilities=b},d.addAbility=function(b,c){a.abilities[b]||(a.abilities[b]=[]),a.abilities[b].push(c)},d.can=function(b){for(var d,e,f=0,g=a.roles.length;g>f;f++)if(d=a.roles[f],e=c(d),e.indexOf(b)>-1)return!0;return!1},d}]);